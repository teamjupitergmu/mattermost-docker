(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{1131:function(e,a,t){"use strict";t.d(a,"a",(function(){return m}));t(137);var n=t(33),s=t.n(n),i=t(6),r=t.n(i),o=t(1105),l=t(1103);function c(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}class m extends r.a.PureComponent{render(){return r.a.createElement("div",{id:"back_button",className:"signup-header"},r.a.createElement(l.a,{onClick:this.props.onClick,to:this.props.url},r.a.createElement(o.a,{id:"generic_icons.back",defaultMessage:"Back Icon"},e=>r.a.createElement("span",{id:"back_button_icon",className:"fa fa-1x fa-angle-left",title:e.toString()})),r.a.createElement(o.a,{id:"web.header.back",defaultMessage:"Back"})))}}c(m,"propTypes",{url:s.a.string,onClick:s.a.func}),c(m,"defaultProps",{url:"/"})},1137:function(e,a,t){e.exports=t.p+"files/77de51bb9d8c3e0ae1c9fba08495fcc7.png"},1192:function(e,a,t){"use strict";t.d(a,"a",(function(){return c}));var n=t(33),s=t.n(n),i=t(6),r=t.n(i),o=t(1105);function l(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}class c extends r.a.PureComponent{render(){const{customDescriptionText:e,siteName:a}=this.props;let t=null;return t=e||r.a.createElement(o.a,{id:"web.root.signup_info",defaultMessage:"All team communication in one place, searchable and accessible anywhere"}),r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",{id:"site_name"},a),r.a.createElement("h4",{id:"site_description",className:"color--light"},t))}}l(c,"propTypes",{customDescriptionText:s.a.string,siteName:s.a.string}),l(c,"defaultProps",{siteName:"Mattermost"})},1235:function(e,a,t){"use strict";t.d(a,"a",(function(){return r}));var n=t(6),s=t.n(n),i=t(1105);class r extends s.a.PureComponent{render(){return s.a.createElement(i.a,{id:"generic_icons.logout",defaultMessage:"Logout Icon"},e=>s.a.createElement("i",{className:"fa fa-1x fa-angle-left",title:e}))}}},1942:function(e,a,t){"use strict";t.r(a);var n=t(309),s=t(7),i=t(1104),r=t(173),o=t(140),l=t(15),c=t(12),m=t(61),u=t(16),d=t(10),p=t(1189),g=t(14),f=(t(52),t(113),t(98),t(33)),E=t.n(f),b=t(6),h=t.n(b),_=t(1105),T=t(1103),v=t(1119),C=t(17),N=t(0),M=t(1137),P=t.n(M),R=t(1180),j=t(1131),k=t(1118),y=t(1181),I=t(1192),w=t(1235),O=t(1113),S=(t(591),t(34),t(1389)),x=t(1136),U=t(1116);class A extends h.a.PureComponent{render(){return h.a.createElement("span",this.props,h.a.createElement(_.a,{id:"generic_icons.info",defaultMessage:"Info Icon"},e=>h.a.createElement("svg",{width:"100%",height:"100%",viewBox:"0 0 20 20",style:J,role:"img","aria-label":e},h.a.createElement("g",{transform:"matrix(1.17647,0,0,1.17647,-1.55431e-15,-1.00573e-14)"},h.a.createElement("path",{d:"M8.5,0C3.797,0 0,3.797 0,8.5C0,13.203 3.797,17 8.5,17C13.203,17 17,13.203 17,8.5C17,3.797 13.203,0 8.5,0ZM10,8.5C10,7.672 9.328,7 8.5,7C7.672,7 7,7.672 7,8.5L7,12.45C7,13.278 7.672,13.95 8.5,13.95C9.328,13.95 10,13.278 10,12.45L10,8.5ZM8.5,3C9.328,3 10,3.672 10,4.5C10,5.328 9.328,6 8.5,6C7.672,6 7,5.328 7,4.5C7,3.672 7.672,3 8.5,3Z"})))))}}const J={fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:1.41421};var L=t(27);function q(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}class D extends h.a.PureComponent{constructor(...e){super(...e),q(this,"handleTeamClick",e=>{e.preventDefault(),this.props.onTeamClick(this.props.team)}),q(this,"renderDescriptionTooltip",()=>{const e=this.props.team;if(!e.description)return null;const a=h.a.createElement(S.a,{id:"team-description__tooltip"},e.description);return h.a.createElement(U.a,{delayShow:1e3,placement:"top",overlay:a,rootClose:!0,container:this},h.a.createElement(A,{className:"icon icon--info"}))})}render(){const{canJoinPublicTeams:e,canJoinPrivateTeams:a,loading:t,team:n}=this.props;let s;s=t?h.a.createElement(x.a,{className:"fa fa-refresh fa-spin right signup-team__icon",component:"span",title:{id:Object(L.b)("generic_icons.loading"),defaultMessage:"Loading Icon"}}):h.a.createElement(x.a,{className:"fa fa-angle-right right signup-team__icon",component:"span",title:{id:Object(L.b)("select_team.join.icon"),defaultMessage:"Join Team Icon"}});const i=n.allow_open_invite&&e||!n.allow_open_invite&&a;return h.a.createElement("div",{className:"signup-team-dir"},this.renderDescriptionTooltip(),h.a.createElement("a",{href:"#",id:g.h(n.display_name),onClick:i?this.handleTeamClick:null,className:i?"":"disabled"},h.a.createElement("span",{className:"signup-team-dir__name"},n.display_name),!n.allow_open_invite&&h.a.createElement(x.a,{className:"fa fa-lock light",title:{id:Object(L.b)("select_team.private.icon"),defaultMessage:"Private team"}}),i&&s))}}function Y(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}q(D,"propTypes",{team:E.a.object.isRequired,onTeamClick:E.a.func.isRequired,loading:E.a.bool.isRequired,canJoinPublicTeams:E.a.bool.isRequired,canJoinPrivateTeams:E.a.bool.isRequired});const G=200,B="api.team.add_members.user_denied";class Z extends h.a.Component{constructor(e){super(e),Y(this,"handleTeamClick",async e=>{const{siteURL:a,currentUserRoles:t}=this.props;this.setState({loadingTeamId:e.id});const{data:n,error:s}=await this.props.actions.addUserToTeam(e.id,this.props.currentUserId);if(n)this.props.history.push("/".concat(e.name,"/channels/").concat(N.Q.DEFAULT_CHANNEL));else if(s){let e=s.message;s.server_error_id===B&&(e=t.includes(N.Q.PERMISSIONS_SYSTEM_ADMIN)?h.a.createElement(O.b,{id:"join_team_group_constrained_denied_admin",defaultMessage:"You need to be a member of a linked group to join this team. You can add a group to this team [here](".concat(a,"/admin_console/user_management/groups)."),values:{siteURL:a}}):h.a.createElement(O.b,{id:"join_team_group_constrained_denied",defaultMessage:"You need to be a member of a linked group to join this team."})),this.setState({error:e,loadingTeamId:""})}}),Y(this,"handleLogoutClick",e=>{e.preventDefault(),Object(v.e)("/login")}),Y(this,"clearError",e=>{e.preventDefault(),this.setState({error:null})}),this.state={loadingTeamId:"",error:null}}componentDidMount(){this.props.actions.getTeams(0,G),this.props.actions.loadRolesIfNeeded(this.props.currentUserRoles.split(" "))}render(){const{currentUserIsGuest:e,canManageSystem:a,customDescriptionText:t,isMemberOfTeam:n,listableTeams:s,siteName:i,canCreateTeams:r,canJoinPublicTeams:o,canJoinPrivateTeams:l}=this.props;let m;if(this.state.loadingTeamId)m=h.a.createElement(k.a,null);else if(this.state.error)m=h.a.createElement("div",{className:"signup__content"},h.a.createElement("div",{className:"form-group has-error"},h.a.createElement("label",{className:"control-label"},this.state.error)));else if(e)m=h.a.createElement("div",{className:"signup__content"},h.a.createElement("div",{className:"form-group has-error"},h.a.createElement("label",{className:"control-label"},h.a.createElement(_.a,{id:"signup_team.guest_without_channels",defaultMessage:"Your guest account has no channels assigned. Please contact an administrator."}))));else{let e=[];s.forEach(a=>{(a.allow_open_invite&&o||!a.allow_open_invite&&l)&&e.push(h.a.createElement(D,{key:"team_"+a.name,team:a,onTeamClick:this.handleTeamClick,loading:this.state.loadingTeamId===a.id,canJoinPublicTeams:o,canJoinPrivateTeams:l}))}),0===e.length&&(r||a)?e=h.a.createElement("div",{className:"signup-team-dir-err"},h.a.createElement("div",null,h.a.createElement(_.a,{id:"signup_team.no_open_teams_canCreate",defaultMessage:"No teams are available to join. Please create a new team or ask your administrator for an invite."}))):0===e.length&&(e=h.a.createElement("div",{className:"signup-team-dir-err"},h.a.createElement("div",null,h.a.createElement(y.a,{permissions:[c.Permissions.CREATE_TEAM]},h.a.createElement(_.a,{id:"signup_team.no_open_teams_canCreate",defaultMessage:"No teams are available to join. Please create a new team or ask your administrator for an invite."})),h.a.createElement(y.a,{permissions:[c.Permissions.CREATE_TEAM],invert:!0},h.a.createElement(_.a,{id:"signup_team.no_open_teams",defaultMessage:"No teams are available to join. Please ask your administrator for an invite."}))))),m=h.a.createElement("div",{id:"teamsYouCanJoinContent",className:"signup__content"},h.a.createElement("h4",null,h.a.createElement(_.a,{id:"signup_team.join_open",defaultMessage:"Teams you can join: "})),h.a.createElement("div",{className:"signup-team-all"},e))}const u=h.a.createElement(y.a,{permissions:[c.Permissions.CREATE_TEAM]},h.a.createElement("div",{className:"margin--extra"},h.a.createElement(T.a,{id:"createNewTeamLink",to:"/create_team",className:"signup-team-login"},h.a.createElement(_.a,{id:"login.createTeam",defaultMessage:"Create a new team"}))));let d,p;return C.o()||(d=h.a.createElement(y.a,{permissions:[c.Permissions.MANAGE_SYSTEM]},h.a.createElement("div",{className:"margin--extra hidden-xs"},h.a.createElement(T.a,{to:"/admin_console",className:"signup-team-login"},h.a.createElement(_.a,{id:"signup_team_system_console",defaultMessage:"Go to System Console"}))))),p=this.state.error?h.a.createElement(j.a,{onClick:this.clearError}):n?h.a.createElement(j.a,null):h.a.createElement("div",{className:"signup-header"},h.a.createElement("a",{href:"#",id:"logout",onClick:this.handleLogoutClick},h.a.createElement(w.a,null),h.a.createElement(_.a,{id:"web.header.logout",defaultMessage:"Logout"}))),h.a.createElement("div",null,h.a.createElement(R.a,null),p,h.a.createElement("div",{className:"col-sm-12"},h.a.createElement("div",{className:"signup-team__container"},h.a.createElement("img",{alt:"signup team logo",className:"signup-team-logo",src:P.a}),h.a.createElement(I.a,{customDescriptionText:t,siteName:i}),m,u,d)))}}Y(Z,"propTypes",{currentUserId:E.a.string.isRequired,currentUserRoles:E.a.string,currentUserIsGuest:E.a.bool,customDescriptionText:E.a.string,isMemberOfTeam:E.a.bool.isRequired,listableTeams:E.a.array,siteName:E.a.string,canCreateTeams:E.a.bool.isRequired,canManageSystem:E.a.bool.isRequired,canJoinPublicTeams:E.a.bool.isRequired,canJoinPrivateTeams:E.a.bool.isRequired,history:E.a.object,siteURL:E.a.string,actions:E.a.shape({getTeams:E.a.func.isRequired,loadRolesIfNeeded:E.a.func.isRequired,addUserToTeam:E.a.func.isRequired}).isRequired});a.default=Object(i.g)(Object(n.connect)((function(e){const a=Object(l.getConfig)(e),t=Object(d.getCurrentUser)(e),n=Object.values(Object(u.getTeamMemberships)(e));return{currentUserId:t.id,currentUserRoles:t.roles||"",currentUserIsGuest:Object(g.V)(t),customDescriptionText:a.CustomDescriptionText,isMemberOfTeam:n&&n.length>0,listableTeams:Object(u.getSortedListableTeams)(e,t.locale),siteName:a.SiteName,canCreateTeams:Object(m.haveISystemPermission)(e,{permission:c.Permissions.CREATE_TEAM}),canManageSystem:Object(m.haveISystemPermission)(e,{permission:c.Permissions.MANAGE_SYSTEM}),canJoinPublicTeams:Object(m.haveISystemPermission)(e,{permission:c.Permissions.JOIN_PUBLIC_TEAMS}),canJoinPrivateTeams:Object(m.haveISystemPermission)(e,{permission:c.Permissions.JOIN_PRIVATE_TEAMS}),siteURL:a.SiteURL}}),(function(e){return{actions:Object(s.bindActionCreators)({getTeams:r.getTeams,loadRolesIfNeeded:o.loadRolesIfNeeded,addUserToTeam:p.a},e)}}))(Z))}}]);
//# sourceMappingURL=14.7641c68e9b6907bf6258.js.map